(function(e){function t(t){for(var a,n,o=t[0],u=t[1],l=t[2],p=0,d=[];p<o.length;p++)n=o[p],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&d.push(i[n][0]),i[n]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);c&&c(t);while(d.length)d.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,o=1;o<r.length;o++){var u=r[o];0!==i[u]&&(a=!1)}a&&(s.splice(t--,1),e=n(n.s=r[0]))}return e}var a={},i={app:0},s=[];function n(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=a,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var c=u;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";r("85ec")},"12d4":function(e,t,r){"use strict";r("ea53")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("SensorProject")],1)},s=[],n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-card-group",{staticStyle:{margin:"10%"},attrs:{deck:""}},[r("br"),r("b-card",{attrs:{title:"Temperatura","bg-variant":"light","text-variant":"dark"}},[r("b-card-text",[r("h4",[e._v(e._s(e.lastTemperature)+" °C")])]),r("br"),r("b-card-footer",{attrs:{"footer-bg-variant":"light"}},[r("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.showGraphics("temperature")}}},[e._v("Mostrar Gráfico")])],1)],1),r("br"),r("b-card",{attrs:{title:"Umidade","bg-variant":"light","text-variant":"dark"}},[r("b-card-text",[r("h4",[e._v(e._s(e.lastSoilMoisture)+"%")])]),r("br"),r("b-card-footer",{attrs:{"footer-bg-variant":"light"}},[r("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.showGraphics("soilMoisture")}}},[e._v("Mostrar Gráfico")])],1)],1),r("b-modal",{attrs:{id:"graphics",size:"lg",cancelTitle:"Sair",okTitle:"Gerar Relatório",title:e.graphicTitle},on:{ok:function(t){return e.downloadReport()}}},["soilMoisture"===e.modalType?r("graphics",{attrs:{chartValues:e.soilMoistureValues,labelGraphics:e.graphicTitle}}):e._e(),"temperature"===e.modalType?r("graphics",{attrs:{chartValues:e.temperatureValues,labelGraphics:e.graphicTitle}}):e._e()],1),r("div",[r("table",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"exportable_temperature_table",attrs:{border:"1"}},[r("tbody",e._l(e.allTemperature,(function(t,a){return r("tr",{key:a},[r("td",[e._v(" "+e._s(t.date?Intl.DateTimeFormat("pt-BR",{dateStyle:"short",timeStyle:"medium"}).format(t.date):"Data e Hora")+" ")]),r("td",[e._v(" "+e._s(t.temperature?t.temperature:" Temperatura")+" ")])])})),0)]),r("table",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"exportable_soil_moistures_table",attrs:{border:"1"}},[r("tbody",e._l(e.allSoilMoistures,(function(t,a){return r("tr",{key:a},[r("td",[e._v(" "+e._s(t.date?Intl.DateTimeFormat("pt-BR",{dateStyle:"short",timeStyle:"medium"}).format(t.date):"Data e Hora")+" ")]),r("td",[e._v(" "+e._s(t.soilMoisture?t.soilMoisture:" Umidade")+" ")])])})),0)])])],1)},o=[],u=(r("d81d"),r("d3b7"),r("b680"),r("159b"),r("ac1f"),r("1276"),r("260b")),l=(r("66ce"),{apiKey:"AIzaSyD-DZfCyTXZ0uNKcg2mYaR_OaCLwlyo_6E",authDomain:"esp8266-dht22-d73de.firebaseapp.com",databaseURL:"https://esp8266-dht22-d73de-default-rtdb.firebaseio.com",projectId:"esp8266-dht22-d73de",storageBucket:"esp8266-dht22-d73de.appspot.com",messagingSenderId:"223173696077",appId:"1:223173696077:web:7a740dc85d80cce5511a04",measurementId:"G-6T6R5QPXH5"});u["a"].initializeApp(l);var c=u["a"].database(),p=c.ref("/dht22/temperatura"),d=c.ref("/dht22/humidade"),h={getAllTemperature:function(){return p},getAllHumidade:function(){return d}},f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("LineChartGenerator",{attrs:{"chart-options":e.chartOptions,"chart-data":e.chartData,"chart-id":e.chartId,"dataset-id-key":e.datasetIdKey,plugins:e.plugins,"css-classes":e.cssClasses,styles:e.styles,width:e.width,height:e.height}})},m=[],b=(r("a9e3"),r("7b97")),g=r("9b4a");g["d"].register(g["o"],g["p"],g["f"],g["h"],g["i"],g["c"],g["k"]);var v={name:"LineChart",components:{LineChartGenerator:b["a"]},props:{labelGraphics:{type:String,default:void 0},chartLabels:{type:Array,default:function(){return["26/06/2022","27/06/2022","28/06/2022","29/06/2022","30/06/2022","01/07/2022"]}},chartValues:{type:Array,default:function(){return["22.1","22.1","28.1","22.1","40.1","20.1","18.1"]}},chartId:{type:String,default:"line-chart"},datasetIdKey:{type:String,default:"label"},width:{type:Number,default:400},height:{type:Number,default:400},cssClasses:{default:"",type:String},styles:{type:Object,default:function(){}},plugins:{type:Array,default:function(){return[]}}},data:function(){return{chartData:{labels:this.chartLabels,datasets:[{label:this.labelGraphics,backgroundColor:"#2E2E2E",data:this.chartValues}]},chartOptions:{responsive:!0,maintainAspectRatio:!1}}}},y=v,_=r("2877"),w=Object(_["a"])(y,f,m,!1,null,null,null),T=w.exports,M=r("25ca"),S={components:{Graphics:T},data:function(){return{temperatures:[[],[],[],[],[],[],[]],soilMoistures:[[],[],[],[],[],[],[]],allSoilMoistures:[],allTemperature:[],modalType:!1}},computed:{lastTemperature:function(){var e=new Date,t=e.getDay();return 0===this.temperatures[t].length?0:this.temperatures[t][this.temperatures[t].length-1]["temperature"]},lastSoilMoisture:function(){var e=new Date,t=e.getDay();return 0===this.soilMoistures[t].length?0:this.soilMoistures[t][this.soilMoistures[t].length-1]["soilMoisture"]},soilMoistureValues:function(){return this.soilMoistures.map((function(e){var t=e.length;if(0===t)return 0;var r=e.reduce((function(e,t){return e+parseFloat(t.soilMoisture)}),0);return(r/t).toFixed(2)}))},temperatureValues:function(){return this.temperatures.map((function(e){var t=e.length;if(0===t)return 0;var r=e.reduce((function(e,t){return e+parseFloat(t.temperature)}),0);return(r/t).toFixed(2)}))},graphicTitle:function(){return"temperature"===this.modalType?"Temperatura":"Umidade"}},methods:{downloadReport:function(e,t){var r="temperature"===this.modalType?this.$refs.exportable_temperature_table:this.$refs.exportable_soil_moistures_table,a=M["a"].table_to_book(r,{sheet:"Sheet JS"});return t?M["b"](a,{bookType:"xlsx",bookSST:!0,type:"base64"}):M["c"](a,e||this.graphicTitle+".xlsx")},showGraphics:function(e){this.modalType=e,this.$bvModal.show("graphics")},getAllDatabases:function(){var e=this,t=new Date,r=t.setDate(t.getDate()-7)/1e3;h.getAllTemperature().on("value",(function(t){t.forEach((function(t){var a=t.val().split(";");if(a[0]>=r){var i=new Date(1e3*a[0]),s=i.getDay();e.temperatures[s].push({date:i,temperature:a[1]}),e.allTemperature.push({date:i,temperature:a[1]})}}))})),h.getAllHumidade().on("value",(function(t){t.forEach((function(t){var a=t.val().split(";");if(a[0]>=r){var i=new Date(1e3*a[0]),s=i.getDay();e.soilMoistures[s].push({date:i,soilMoisture:a[1]}),e.allSoilMoistures.push({date:i,soilMoisture:a[1]})}}))}))}},created:function(){this.getAllDatabases()}},x=S,D=(r("12d4"),Object(_["a"])(x,n,o,!1,null,"e1bdcc6a",null)),k=D.exports,O={name:"App",components:{SensorProject:k}},j=O,G=(r("034f"),Object(_["a"])(j,i,s,!1,null,null,null)),A=G.exports,I=r("5f5b"),P=r("b1e0");r("f9e3"),r("2dd8");a["default"].config.productionTip=!1,a["default"].use(I["a"]),a["default"].use(P["a"]),new a["default"]({render:function(e){return e(A)}}).$mount("#app")},"85ec":function(e,t,r){},ea53:function(e,t,r){}});
//# sourceMappingURL=app.5e3944c4.js.map